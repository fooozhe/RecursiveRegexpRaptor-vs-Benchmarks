<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Performance comparison of regular expression engines</title>

  <style type="text/css">
    body {
	background-color: #707070;
	color: #000000;
	font-family: "garamond"
    }
    td.main {
      background-color: white;
      color: black;
      font-family: "garamond"
    }
	table.results {
	  background-color: #B0B0B0;
	}
	th {
	  background-color: #B0C4DE;
	}
	th.raptor {
	  color: #994400;
	}
        td.pattern {
	  background-color: #F0E68C;
	  text-align:left;
	}
	td.raptor-pattern {
	  color: #994400;
          text-align:left;
	}
	td.time {
	  background-color: #E0FFFF;
	  text-align:right;
	}
  </style>

</head>

<body>

<center>
<table width="760" cellspacing="0" cellpadding="0">
<tbody><tr height="20"><td class="main" width="20"></td><td class="main" width="720"></td><td class="main" width="20"></td></tr>
<tr><td class="main" width="20"></td><td class="main" width="720">

<p><em> Read the original (no copy/paste) post
by <b>dark100</b> at <a href="http://sljit.sourceforge.net/regex_perf.html">http://sljit.sourceforge.net/regex_perf.html</a>
</em></p>

<h1><center><b>Performance comparison of regular expression engines</b></center></h1>

<h3>Introduction</h3>
Processing text or raw byte-sequence are among the common tasks performed by most software tools.
These tasks usually involve pattern matching algorithms, and the most popular tool for such purpose
is regular expressions. Regular expressions has been evolved a lot since Kleene defined the regular
sets in the 1950's. Today we have several widely used regular expression engines which have
different <a href="http://en.wikipedia.org/wiki/Comparison_of_regular_expression_engines">features</a>
which makes any performance comparison a difficult task, since a <b>faster</b> engine is not necessary
<b>better</b>. Depending on the use case it might be enough to know whether a POSIX compatible regular
expression matches to a line, even the position of the match is unneeded (<i>grep utility</i>). On the
contrary other use cases require the position of capturing brackets, unicode support, conditional and
atomic block (handling a byte sequence as a single character, like 'sch' in German language) support
just to name a few. The former case needs a less sophisticated algorithm, which is likely be much
faster than the latter, but again, that does not mean the former is <b>better</b>. More about these
engine types can be found <a href="http://sljit.sourceforge.net/regex_compare.html">here</a>.

<h3>Participants</h3>
The following popular engines were choosen:
<ul>
   <li><a href="http://www.pcre.org/">PCRE2 10.10</a></li>
   <li><a href="https://github.com/laurikari/tre/">tre 0.8.0</a></li>
   <li><a href="http://www.geocities.jp/kosako3/oniguruma/">Oniguruma 5.9.6</a></li>
   <li><a href="https://github.com/google/re2">re2 by Google</a></li>
   <li><a href="http://sljit.sourceforge.net/pcre.html">PCRE2 10.10 with sljit JIT compiler support</a></li>
</ul>

and

<ul>
   <li><a href="https://github.com/nasciiboy/RecursiveRegexpRaptor">regexp3</a></li>
   <li><a href="https://github.com/nasciiboy/RecursiveRegexpRaptor-4">regexp4</a></li>
</ul>

Before anyone jump to any conclusions, I should note the followings:
<ul>
   <li>The engines were not fine tuned (because of my lack of knowledge about their internal workings).
   I just compiled them with the default options. I know enabling or disabling some features can
   heavily affect the results. If you feel that you have a better configuration just drop me an
   e-mail and I will update the results (hzmester(at)freemail(dot)hu).</li>
   <li>The regular expression engines are compiled with -O3 to allow the best performance.</li>
   <li>This comparison page was inspired by the work of John Maddock (See his own regex comparison
   <a href="http://www.boost.org/doc/libs/1_41_0/libs/regex/doc/gcc-performance.html">here</a>).
   The input is also the same he used before:
   <a href="http://www.gutenberg.org/files/3200/old/mtent12.zip">mtent12.zip</a>.
   It is a text file (e-book) which size is about 20 Mbytes.</li>
   <li>Only common patterns are selected, they are not pathological cases nor have any PERL
   specific features. The comparison was caseful.</li>
</ul>
<p></p>

<h3>Results</h3>

<h2>x86-64 bit Intel Cerelon 847 1.1GHz (GCC 6.2.1, Linux)</h2>
<table class="results" border="1" width="100%">
<tbody><tr><th>Regular expression</th><th>PCRE</th><th>PCRE<br>-DFA</th><th>TRE</th><th>Onig-<br>uruma</th><th>RE2</th><th>PCRE<br>-JIT</th><th class="raptor">regexp3</th><th class="raptor">regexp4</th></tr>
<tr><td class="pattern"><table><tr><td>.|\n</td></tr><tr><td class="raptor-pattern">.</td></tr></table></td><td class="time">4364 ms (20045118)</td><td class="time">5152 ms (20045118)</td><td class="time">6641 ms (20045118)</td><td class="time">2202 ms (20045118)</td><td class="time">7566 ms (20045118)</td><td class="time">1086 ms (20045118)</td><td class="time">1756 ms (20045118)</td><td class="time">774 ms (20045118)</td></tr>
<tr><td class="pattern"><table><tr><td>\w</td></tr><tr><td class="raptor-pattern">:w</td></tr></table></td><td class="time">2837 ms (14751878)</td><td class="time">4292 ms (14751878)</td><td class="time">4693 ms (14751878)</td><td class="time">2243 ms (14751878)</td><td class="time">5748 ms (14751878)</td><td class="time">946 ms (14751878)</td><td class="time">1849 ms (14750958)</td><td class="time">899 ms (14750958)</td></tr>
<tr><td class="pattern"><table><tr><td>\d</td></tr><tr><td class="raptor-pattern">:d</td></tr></table></td><td class="time">67 ms (27084)</td><td class="time">69 ms (27084)</td><td class="time">1058 ms (27084)</td><td class="time">116 ms (27084)</td><td class="time">235 ms (27084)</td><td class="time">58 ms (27084)</td><td class="time">1755 ms (27084)</td><td class="time">501 ms (27084)</td></tr>
<tr><td class="pattern"><table><tr><td>\S</td></tr><tr><td class="raptor-pattern">:S</td></tr></table></td><td class="time">2992 ms (15451664)</td><td class="time">3280 ms (15451664)</td><td class="time">4634 ms (15451664)</td><td class="time">1851 ms (15451664)</td><td class="time">6016 ms (15451664)</td><td class="time">895 ms (15451664)</td><td class="time">1869 ms (15451664)</td><td class="time">893 ms (15451664)</td></tr>
<tr><td class="pattern"><table><tr><td>[.\s]+</td></tr><tr><td class="raptor-pattern">[:.:s]+</td></tr></table></td><td class="time">896 ms (3430783)</td><td class="time">1089 ms (3430783)</td><td class="time">1897 ms (991813)</td><td class="time">762 ms (3430783)</td><td class="time">1774 ms (3430783)</td><td class="time">388 ms (3430783)</td><td class="time">4583 ms (3430783)</td><td class="time">1321 ms (3430783)</td></tr>
<tr><td class="pattern"><table><tr><td>[\n.]+</td></tr><tr><td class="raptor-pattern">[\n:.]+</td></tr></table></td><td class="time">173 ms (438367)</td><td class="time">238 ms (438367)</td><td class="time">1407 ms (438367)</td><td class="time">222 ms (438367)</td><td class="time">430 ms (438367)</td><td class="time">46 ms (438367)</td><td class="time">4174 ms (438367)</td><td class="time">971 ms (438367)</td></tr>
<tr><td class="pattern"><table><tr><td>e</td></tr><tr><td class="raptor-pattern">e</td></tr></table></td><td class="time">365 ms (1781425)</td><td class="time">451 ms (1781425)</td><td class="time">498 ms (1781425)</td><td class="time">405 ms (1781425)</td><td class="time">747 ms (1781425)</td><td class="time">136 ms (1781425)</td><td class="time">1721 ms (1781425)</td><td class="time">610 ms (1781425)</td></tr>
<tr><td class="pattern"><table><tr><td>(((((e)))))</td></tr><tr><td class="raptor-pattern">&lt;&lt;&lt;&lt;&lt;e&gt;&gt;&gt;&gt;&gt;</td></tr></table></td><td class="time">1234 ms (1781425)</td><td class="time">1187 ms (1781425)</td><td class="time">496 ms (1781425)</td><td class="time">878 ms (1781425)</td><td class="time">749 ms (1781425)</td><td class="time">203 ms (1781425)</td><td class="time">26751 ms (1781425)</td><td class="time">3496 ms (1781425)</td></tr>
<tr><td class="pattern"><table><tr><td>((((((((((e))))))))))</td></tr><tr><td class="raptor-pattern">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;e&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</td></tr></table></td><td class="time">1908 ms (1781425)</td><td class="time">1908 ms (1781425)</td><td class="time">497 ms (1781425)</td><td class="time">1162 ms (1781425)</td><td class="time">765 ms (1781425)</td><td class="time">321 ms (1781425)</td><td class="time">84651 ms (1781425)</td><td class="time">5335 ms (1781425)</td></tr>
<tr><td class="pattern"><table><tr><td>Twain</td></tr><tr><td class="raptor-pattern">Twain</td></tr></table></td><td class="time">11 ms (2388)</td><td class="time">50 ms (2388)</td><td class="time">1021 ms (2388)</td><td class="time">53 ms (2388)</td><td class="time">8 ms (2388)</td><td class="time">51 ms (2388)</td><td class="time">4714 ms (2388)</td><td class="time">538 ms (2388)</td></tr>
<tr><td class="pattern"><table><tr><td>(Twain)</td></tr><tr><td class="raptor-pattern">&lt;Twain&gt;</td></tr></table></td><td class="time">14 ms (2388)</td><td class="time">50 ms (2388)</td><td class="time">1010 ms (2388)</td><td class="time">53 ms (2388)</td><td class="time">8 ms (2388)</td><td class="time">51 ms (2388)</td><td class="time">9531 ms (2388)</td><td class="time">872 ms (2388)</td></tr>
<tr><td class="pattern"><table><tr><td>(?i)Twain</td></tr><tr><td class="raptor-pattern">#*Twain</td></tr></table></td><td class="time">198 ms (2657)</td><td class="time">294 ms (2657)</td><td class="time">1311 ms (2657)</td><td class="time">399 ms (2657)</td><td class="time">261 ms (2657)</td><td class="time">53 ms (2657)</td><td class="time">4792 ms (2657)</td><td class="time">644 ms (2657)</td></tr>
<tr><td class="pattern"><table><tr><td>((T|t)(w|W)(a|A)i([a-z]|1))</td></tr><tr><td class="raptor-pattern">&lt;&lt;T|t&gt;&lt;w|W&gt;&lt;a|A&gt;i&lt;[a-z]|1&gt;&gt;</td></tr></table></td><td class="time">615 ms (2427)</td><td class="time">534 ms (2427)</td><td class="time">1913 ms (2427)</td><td class="time">348 ms (2427)</td><td class="time">260 ms (2427)</td><td class="time">67 ms (2427)</td><td class="time">25165 ms (2427)</td><td class="time">2590 ms (2427)</td></tr>
<tr><td class="pattern"><table><tr><td>[a-z]shing</td></tr><tr><td class="raptor-pattern">[a-z]shing</td></tr></table></td><td class="time">1434 ms (1877)</td><td class="time">2351 ms (1877)</td><td class="time">1581 ms (1877)</td><td class="time">50 ms (1877)</td><td class="time">350 ms (1877)</td><td class="time">49 ms (1877)</td><td class="time">7466 ms (1877)</td><td class="time">1447 ms (1877)</td></tr>
<tr><td class="pattern"><table><tr><td>Huck[a-zA-Z]+|Saw[a-zA-Z]+</td></tr><tr><td class="raptor-pattern">Huck[a-zA-Z]+|Saw[a-zA-Z]+</td></tr></table></td><td class="time">73 ms (396)</td><td class="time">78 ms (396)</td><td class="time">1598 ms (396)</td><td class="time">121 ms (396)</td><td class="time">225 ms (396)</td><td class="time">9 ms (396)</td><td class="time">9074 ms (396)</td><td class="time">1492 ms (396)</td></tr>
<tr><td class="pattern"><table><tr><td>[a-q][^u-z]{13}x</td></tr><tr><td class="raptor-pattern">[a-q][^u-z]{13}x</td></tr></table></td><td class="time">1748 ms (4929)</td><td class="time">6371 ms (4929)</td><td class="time">4376 ms (4929)</td><td class="time">154 ms (4929)</td><td class="time">10241 ms (4929)</td><td class="time">5 ms (4929)</td><td class="time">15469 ms (4929)</td><td class="time">3935 ms (4929)</td></tr>
<tr><td class="pattern"><table><tr><td>Tom|Sawyer|Huckleberry|Finn</td></tr><tr><td class="raptor-pattern">Tom|Sawyer|Huckleberry|Finn</td></tr></table></td><td class="time">97 ms (3015)</td><td class="time">104 ms (3015)</td><td class="time">2764 ms (3015)</td><td class="time">140 ms (3015)</td><td class="time">229 ms (3015)</td><td class="time">85 ms (3015)</td><td class="time">22447 ms (3015)</td><td class="time">2773 ms (3015)</td></tr>
<tr><td class="pattern"><table><tr><td>(Tom|Sawyer|Huckleberry|Finn)</td></tr><tr><td class="raptor-pattern">&lt;Tom|Sawyer|Huckleberry|Finn&gt;</td></tr></table></td><td class="time">101 ms (3015)</td><td class="time">107 ms (3015)</td><td class="time">2789 ms (3015)</td><td class="time">142 ms (3015)</td><td class="time">229 ms (3015)</td><td class="time">83 ms (3015)</td><td class="time">38332 ms (3015)</td><td class="time">3319 ms (3015)</td></tr>
<tr><td class="pattern"><table><tr><td>[hHeELlLlOo][hHeELlLlOo][hHeELlLlOo][hHeELlLlOo][hHeELlLlOo]</td></tr><tr><td class="raptor-pattern">[hHeELlLlOo][hHeELlLlOo][hHeELlLlOo][hHeELlLlOo][hHeELlLlOo]</td></tr></table></td><td class="time">612 ms (534)</td><td class="time">902 ms (534)</td><td class="time">3178 ms (534)</td><td class="time">660 ms (534)</td><td class="time">326 ms (534)</td><td class="time">244 ms (534)</td><td class="time">17300 ms (534)</td><td class="time">1637 ms (534)</td></tr>
<tr><td class="pattern"><table><tr><td>Tom.{10,25}river|river.{10,25}Tom</td></tr><tr><td class="raptor-pattern">&lt;Tom([^(river|\n)]){10,25}river|river([^(Tom|\n)]){10,25}Tom&gt;</td></tr></table></td><td class="time">205 ms (2)</td><td class="time">260 ms (2)</td><td class="time">1773 ms (2)</td><td class="time">229 ms (2)</td><td class="time">309 ms (2)</td><td class="time">46 ms (2)</td><td class="time">41711 ms (2)</td><td class="time">1988 ms (2)</td></tr>
<tr><td class="pattern"><table><tr><td>ing[^a-zA-Z]</td></tr><tr><td class="raptor-pattern">ing[^a-zA-Z]</td></tr></table></td><td class="time">135 ms (85956)</td><td class="time">250 ms (85956)</td><td class="time">1119 ms (85956)</td><td class="time">92 ms (85956)</td><td class="time">101 ms (85956)</td><td class="time">54 ms (85956)</td><td class="time">4067 ms (85956)</td><td class="time">574 ms (85956)</td></tr>
<tr><td class="pattern"><table><tr><td>[a-zA-Z]ing[^a-zA-Z]</td></tr><tr><td class="raptor-pattern">[a-zA-Z]ing[^a-zA-Z]</td></tr></table></td><td class="time">1499 ms (85823)</td><td class="time">2389 ms (85823)</td><td class="time">1836 ms (85823)</td><td class="time">95 ms (85823)</td><td class="time">377 ms (85823)</td><td class="time">58 ms (85823)</td><td class="time">7917 ms (85823)</td><td class="time">1555 ms (85823)</td></tr>
<tr><td class="pattern"><table><tr><td>([a-zA-Z]+ing)</td></tr><tr><td class="raptor-pattern">&lt;([^(ing|:A)])+ing(([^(ing|:A)])*ing)*&gt;</td></tr></table></td><td class="time">3954 ms (95863)</td><td class="time">5586 ms (95863)</td><td class="time">2081 ms (95863)</td><td class="time">2377 ms (95863)</td><td class="time">389 ms (95863)</td><td class="time">231 ms (95863)</td><td class="time">55897 ms (95863)</td><td class="time">10791 ms (95863)</td></tr>
<tr><td class="pattern"><table><tr><td>([A-Za-z]awyer|[A-Za-z]inn)\s</td></tr><tr><td class="raptor-pattern">&lt;[A-Za-z]awyer|[A-Za-z]inn&gt;:s</td></tr></table></td><td class="time">3052 ms (313)</td><td class="time">3676 ms (313)</td><td class="time">2925 ms (313)</td><td class="time">543 ms (313)</td><td class="time">343 ms (313)</td><td class="time">106 ms (313)</td><td class="time">27720 ms (313)</td><td class="time">4402 ms (313)</td></tr>
</tbody></table>

<br>
<p>Just Donwload, type <code>make</code>. and run <code>runtest</code>.</p>
<br>

<table width="100%" cellspacing="0" cellpadding="0">
<tbody><tr><td align="right">Last modification: 09.10.2016</td></tr></tbody></table>

</td><td class="main" width="20"></td></tr>
<tr height="20"><td class="main" width="20"></td><td class="main" width="720"></td><td class="main" width="20"></td></tr>
</tbody></table>
</center>



</body></html>
